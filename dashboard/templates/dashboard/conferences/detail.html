{% extends 'dashboard/base.html' %}

{% block title %}{{ conference.room_name }} - Jitsi{% endblock %}
{% block page_title %}Conference Details{% endblock %}

{% block content %}
<div class="card" style="max-width: 800px;">
    <div class="card-header">{{ conference.display_name|default:conference.room_name }}</div>
    <div class="card-body">
        <p><strong>Status:</strong> 
            {% if conference.status == 'active' %}<span class="badge badge-success">Active</span>
            {% elif conference.status == 'ended' %}<span class="badge badge-info">Ended</span>
            {% else %}<span class="badge badge-warning">{{ conference.status }}</span>{% endif %}
        </p>
        <p><strong>Room ID:</strong> {{ conference.room_name }}</p>
        <p><strong>Started:</strong> {{ conference.started_at|date:"M d, Y H:i"|default:"--" }}</p>
        <p><strong>Ended:</strong> {{ conference.ended_at|date:"M d, Y H:i"|default:"--" }}</p>
        <p><strong>Duration:</strong> {{ conference.duration }} minutes</p>
        <p><strong>Max Participants:</strong> {{ conference.max_participants }}</p>
        <p><strong>Recorded:</strong> {% if conference.is_recorded %}Yes{% else %}No{% endif %}</p>
        
        {% if conference.status == 'active' %}
        <div style="margin-top: 20px;">
            <a href="{{ conference.meeting_url }}" target="_blank" class="btn btn-success"><i class="fas fa-external-link-alt"></i> Join Meeting</a>
        </div>
        {% endif %}
    </div>
</div>

{% if participants %}
<div class="card" style="max-width: 800px; margin-top: 20px;">
    <div class="card-header">Participants ({{ participants.count }})</div>
    <table>
        <thead><tr><th>Name</th><th>Role</th><th>Joined</th><th>Left</th></tr></thead>
        <tbody>
            {% for p in participants %}
            <tr>
                <td>{{ p.name }}</td>
                <td>{% if p.is_moderator %}<span class="badge badge-info">Moderator</span>{% else %}Participant{% endif %}</td>
                <td>{{ p.joined_at|date:"H:i" }}</td>
                <td>{{ p.left_at|date:"H:i"|default:"--" }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endif %}

<div style="margin-top: 20px;">
    <a href="{% url 'dashboard:conferences' %}" class="btn btn-secondary">‚Üê Back to Conferences</a>
</div>
{% endblock %}
